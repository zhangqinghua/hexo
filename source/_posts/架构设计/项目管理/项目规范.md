---
title: 项目规范

categories:
- 架构设计
- 项目管理

date: 2021-06-28
---

## 开发环境
统一开发语言、统一开发框架、统一开发方法、统一开发环境

这四个统一，目的是杜绝那些随着性子的开发行为，这种行为对团队的可持续发展及积累是毁灭性打击。

## 编码规范
除了形式上的统一，最重要的是命名规范，提高代码的可读性，降低多人协作开发的难度。

## 备份机制
备份很重要，不少删库跑路的故障，其实做好备份机制就不会出大问题。

## 代码审查
定期团队code review。发现大家代码的疏忽、在算法、逻辑、安全等方面的问题，引导大家用正确的方法编码、学习成长。

## 开发流程
用git就约定一下branch的规范，一般用gitlab flow就行。

如果用CI，也要制定规范：一般用jenkins + workflow或者gitlab ci这样的方式就行。

## 注释规范
每个功能函数、方法、接口、类都要有对应注释，各个关键业务代码段，也需注释。

以上九点，做好了，团队就能稳定前进，另外规范是死的，人是活的，在制定开发规范并执行的过程中，如果发现规范反而影响了生产力，一定需要复盘讨论，不合适就推翻重建。

## 安全规范
接口处做入参检查，防止SQL注入。

一些关键业务接口如短信发送，须做机器防刷机制。

源码保证可编译的情况下，每天定时提交。

数据库连接信息不可外泄，由专人管理。

数据库用户密码等关键数据需做加密处理，不可明文保存。

## 接口规范
一般基于http + json或者http + PB的规范，尤其是对客户端的信息传递和response错误的处理。

有人Restful，但Restful从业务角度非常不完备，即便用Restful也要补充很多信息。

## 日志打点
业务日志打点：如前端的界面访问打点，后端下单打点等，便于做ABtest和商业决策分析。

后端系统打点，比如api吞吐、延迟、返回成功/错误的计数，CPU/Mem/带宽占用/磁盘占用量等。设置好报警，千万别等主库满了之后才去处理。

