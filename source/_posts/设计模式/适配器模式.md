---
title: 适配器模式

categories:
- 设计模式

date: 2020-08-18 00:00:55
---
适配器模式是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。

## 模式介绍
1. 举例说明
    电脑能通过读卡器读取SD卡数据，现在要电脑支持读取TF卡数据。

    讲中文的人和讲英文的人对话时需要一个翻译。

1. 意图目的
    将一个类的接口转换成客户希望的另外一个接口，使得原本由于接口不兼容而不能一起工作的那些类能一起工作。
    
1. 主要解决
    需要开发的具有某种业务功能的组件在现有的组件库中已经存在，但它们与当前系统的接口规范不兼容，如果重新开发这些组件成本又很高，这时用适配器模式能很好地解决这些问题。

1. 如何解决
    在适配器模式中有 4 种角色，客户，目标、适配者，适配器。

    在上面的例子种，电脑就是客户角色，SD卡就是目标，它们是兼容的。

    TF卡就是适配者，与电脑不兼容。

    适配器就是TF读卡器，它使得电脑能以读取SD卡的形式读取TF卡数据。

1. 关键代码
    适配器继承/实现了目标，即适配者是目标的子类。

    适配器引用持有了适配者。

    客户 -> 目标。

    客户 -> 目标（适配器） -> 适配者。

1. 何时使用
    使用第三方提供的组件，但组件接口定义和自己要求的接口定义不一致。

    以前开发的系统存在满足新系统功能需求的类，但其接口通新系统不一致。

1. 优点缺点
    复用了现存的类，程序员不需要修改原有代码而重用现有的适配者类。

    将目标类和适配者类解耦，解决了目标类和适配者类接口不一致的问题。

    过多地使用适配器，会让系统非常零乱，不易整体进行把握。

1. 注意事项
    适配器模式不是在详细设计时添加的，而是解决正在服役的项目的问题，是一种妥协。

1. 应用场景

## 代码实现
计算机通过读卡器去读取TF卡。

1、计算机已经支持了读取SD卡功能。

```java
public class Client {

    public static void main(String[] args) {
        Computer computer = new Computer();
        SDcard sdcard = new SDcard();
        String data = computer.read(sdcard);
        System.out.println(data);
    }
}
/**
 * 电脑
 */
class Computer {
    String read(SDcard sdcard) {
        return sdcard.read();
    }
}
/**
 * SD 内存卡
 */
class SDcard {

    String read() {
        return "1001010";
    }

    void write(String data) {
        System.out.println("Writing " + data + " in SDcard...");
    }
}

/**
 * TF 内存卡只能读，不能写
 */
class TFCard {

    String read() {
        return "1001010";
    }
}
```

2、接下来在不改变计算机读取SD卡接口的情况下，通过适配器模式读取TF卡。

```java
public class Client {

    public static void main(String[] args) {
        Computer computer = new Computer();
        TFCard tfCard = new TFCard();
        TFCardAdapter tfCardAdapter = new TFCardAdapter(tfCard);
        computer.read(tfCardAdapter);
    }
}

/**
 * TF 内存卡只能读，不能写
 */
class TFCard {

    String read() {
        return "1001010";
    }
}

/**
 * 适配器
 */
class TFCardAdapter extends SDcard {

    private TFCard tfCard;

    TFCardAdapter(TFCard tfCard) {
        this.tfCard = tfCard;
    }

    @Override
    String read() {
        return tfCard.read();
    }

    @Override
    void write(String data) {
        throw new UnsupportedOperationException();
    }
}
```

## JDK 中的适配器模式

## Spring 中的适配器模式