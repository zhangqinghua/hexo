---
title: 解释器模式

categories:
- 设计模式

date: 2020-08-18 00:00:45
---
在编译原理中，一个算术表达式通过词法分析器形成词法单元，而后这些词法单元再通过语法分析器构建语法分析树，最终形成一颗抽象的语法分析树。这里的词法分析器和语法分析器都可以看做是解析器。


## 模式介绍
1. 举例说明
    编译器。
    运算表达式。
    正则表达式。
    机器人。

1. 意图目的
    给定一个语言表达式，定义它的文法的一种表示，并定义一个解析器，使用该解释器来解释语言中的句子（表达式）。

1. 主要解决

1. 如何解决
    环境类：含有解释器之外的全局信息。
    抽象表达式：声明抽象的解释操作，这个方法为抽象语法树中的所有节点所共享。
    终结符表达式：实现与文法中的终结符相关的解释操作。
    非终结表达式：为文法中的非终结符实现解释操作。
    

1. 关键代码

1. 何时使用
    将一个需要解析执行的语言中的句子表示为一颗抽象语法树。

    一些重复出现的问题可以用一种简单的语言来表达。

    一个简单语法需要解释的场景。

1. 优点缺点

1. 注意事项

1. 应用场景

1. 模式扩展

## 代码实现
四则运算问题：
1. 先输入表达式的形式，比如 a + b + c - d + e，要求表达式的字母不能重复。
1. 再分别输入 a、b、c、d、e 的值。
1. 最后得出结果。

传统方法：编写一个方法，接收表达式的形式，然后根据用户输入的数值进行解析，得到结果。

问题分析：如果加入新的运算符，比如 * / 等等，不利于扩展，另外让一个方法来解析会造成程序结构混乱，不够清晰。

解决方案：可以考虑使用解析器模式，即 表达式 -> 解析器 -> 结果。