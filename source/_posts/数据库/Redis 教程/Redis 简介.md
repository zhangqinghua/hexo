---
title: Redis 简介

categories:
- Redis 教程

tags:
- redis

date: 2020-05-28
---
是什么、有什么、怎么用、为什么。

## Redis 简介

## Redis 基本使用

## Redis 横向比较
Redis与Memcached的区别:
1. 共同点
   Redis 和 Memcache 都是将数据存放在内存中，都是内存数据库。

1. 存储内容
   Redis 只能存储数据，Memcache 可以存储数据、图片、视频等。

   Redis 不仅仅支持简单的 k/v 类型的数据，同时还提供 list，set，hash 等数据结构的存储。

1. 数据结构
   Redis 在数据支持上要比 Memecache 多的多。 

1. 数据安全
   Redis 支持持久化，定期保存到磁盘（持久化） 。
   
   Redis支持数据的备份，即master-slave模式的数据备份。

   Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。

   Memecache 数据只存储在硬盘上，一段挂掉无法恢复。

1. 性能区别
   性能上都很出色，具体到细节，由于Redis只使用单核，而Memcached可以使用多核，所以平均每一个核上Redis在存储小数据时比 

   Memcached性能更高。而在100k以上的数据中，Memcached性能要高于Redis，虽然Redis最近也在存储大数据的性能上进行优化，但是比起 Memcached，还是稍有逊色。

## Redis 底层原理

## Redis 应用场景
1. 缓存热数据
   热点数据（经常会被查询，但是不经常被修改或者删除的数据），首选是使用redis缓存，毕竟强大到冒泡的QPS和极强的稳定性不是所有类似工具都有的，而且相比于memcached还提供了丰富的数据类型可以使用，另外，内存中的数据也提供了AOF和RDB等持久化机制可以选择，要冷、热的还是忽冷忽热的都可选。
   
1. 计数器
   诸如统计点击数等应用。由于单线程，可以避免并发问题，保证不会出错，而且100%毫秒级性能！爽。
1. 队列
   相当于消息系统，ActiveMQ，RocketMQ等工具类似，但是个人觉得简单用一下还行，如果对于数据一致性要求高的话还是用RocketMQ等专业系统。

   由于 Redis 把数据添加到队列是返回添加元素在队列的第几位，所以可以做判断用户是第几个访问这种业务

   队列不仅可以把并发请求变成串行，并且还可以做队列或者栈使用

1. 分布式锁
   验证前端的重复请求（可以自由扩展类似情况），可以通过redis进行过滤：每次请求将request Ip、参数、接口等hash作为key存储redis（幂等性请求），设置多长时间有效期，然后下次请求过来的时候先在redis中检索有没有这个key，进而验证是不是一定时间内过来的重复提交

   秒杀系统，基于redis是单线程特征，防止出现数据库“爆破”

   全局增量ID生成，类似“秒杀”

1. 排行榜
   谁得分高谁排名往上。命令：ZADD（有续集，sorted set）
1. 最新列表
   例如新闻列表页面最新的新闻列表，如果总数量很大的情况下，尽量不要使用select a from A limit 10这种low货，尝试redis的 LPUSH命令构建List，一个个顺序都塞进去就可以啦。不过万一内存清掉了咋办？也简单，查询不到存储key的话，用mysql查询并且初始化一个List到redis中就好了。