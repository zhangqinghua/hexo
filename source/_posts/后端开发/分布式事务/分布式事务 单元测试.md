---
title: 分布式事务 单元测试

categories:
- 后端开发
- 分布式事务

date: 2021-03-16 00:00:01
---
## 场景一
测试在单个服务内的事务表现。

#### 正常流程
1. 单服务内没有异常能正常提交；
1. 单服务内执行事务时间为本地事务时间（10ms）；

#### 异常流程
1. 单服务内出现异常能正常回滚；
1. 单服务内执行事务时间为本地事务时间（10ms）；

## 场景二
测试在两个服务之间的分布式事务表现。

#### 正常流程
1. 订单服务正常创建订单；
1. 库存服务正常扣件库存；

#### 异常流程
1. 订单服务正常创建订单；
1. 库存服务正常扣件库存；
1. 订单服务抛出异常；
1. 库存服务回滚数据；

## 场景三
测试在两个服务之间的分布式事务表现。

#### 正常流程
1. 订单服务正常创建订单；
1. 库存服务正常扣件库存；
1. 库存服务查询订单服务刚刚创建的订单；

## 场景四：