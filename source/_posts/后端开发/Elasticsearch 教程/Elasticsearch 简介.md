---
title: Elasticsearch 简介

categories:
- 后端开发
- Elasticsearch 教程

date: 2021-04-18 99:99:99
---
全文搜索属于最常见的需求，开源的 Elasticsearch 是目前全文搜索引擎的首选。它可以快速地储存、搜索和分析海量数据。维基百科、Stack Overflow、Github 都采用它。

Elastic 的底层是开源库 Lucene。但是，你没法直接用 Lucene，必须自己写代码去调用它的接口。Elastic 是 Lucene 的封装，提供了 REST API 的操作接口，开箱即用。

## 基本概念
#### Index（索引）
动词，相当于 MySQL 中的 insert。

名词，相当于 MySQL 中的 Database。

#### Type（类型）
在 Index 中，可以定义一个或多个 Type。类似于 MySQL 中的 Table，每一种 Type 的数据放在一起。

#### Document（文档）
保存在某个 Index 下，某种 Type 的一个数据，Document 是 JSON 格式的。Document 就像是 MySQL 中的某个 Table 里面的内容。

#### 倒排索引机制
假设现在有以下记录：
1. 红海行动
1. 探索红海行动
1. 红海特别行动
1. 红海纪录篇
1. 特工红海特别探索

那么在 Elasticsearch 中，则会将记录分词，以以下的形式保存：

|词|记录|
| :- |
|红海|1、2、3、4、5|
|行动|1、2、3|
|探索|2、5|
|特别|3、5|
|纪录篇|4|
|特工|5|

> 分词：将整词分析为单词，例如“红海特工行动”分析为“红海”、“特工”、“行动”。

当检索“红海探索”时，命中：

|词|记录|
| :- |
|红海|1、2、3、4、5|
|探索|2、5|

从而得出：1、2、3、4、5、2、5 的记录符合条件，并根据相关性得分进行排序（2、5、1、3、4）。

> 相关性得分：搜索的词在文档中出现的次数越多，相关性越高。