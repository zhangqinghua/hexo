---
title: 阿里云服务

categories:
- 其它

date: 2020-09-4
---

## 访问控制
对象存储OSS提供Bucket级别的权限[访问控制](https://help.aliyun.com/document_detail/31954.html?spm=5176.8466010.acl.1.615e1450N7b9g0)。

Bucket目前有三种访问权限：public-read-write，public-read和private，它们的含义如下：
1. public-read-write
    公共读写，任何人（包括匿名访问者）都可以对该存储空间内文件进行读写操作。

    警告 互联网上任何用户都可以对该 Bucket 内的文件进行访问，并且向该 Bucket 写入数据。这有可能造成您数据的外泄以及费用激增，若被人恶意写入违法信息还可能会侵害您的合法权益。除特殊场景外，不建议您配置公共读写权限。

1. public-read
    公共读，私有写，只有该存储空间的拥有者可以对该存储空间内的文件进行写操作，任何人（包括匿名访问者）都可以对该存储空间中的文件进行读操作。

    警告 互联网上任何用户都可以对该 Bucket 内文件进行访问，这有可能造成您数据的外泄以及费用激增，请谨慎操作。

1. private
    私有读写，只有该存储空间的拥有者可以对该存储空间内的文件进行读写操作，其他人无法访问该存储空间内的文件。

以读取图片的例子说来，如果是私有读写，则需要在图片连接后面加上访问密钥，如下：

```
https://huijie-ews-officialwebsite.oss-cn-hangzhou.aliyuncs.com/enweis/200723170935-160.jpg?Expires=1599210628&OSSAccessKeyId=LTAI8BhoSy8azhCF&Signature=pmXlGqxmox%2FwKezSyomDxoOZSMg%3D
```

如果不加访问密钥则会有以下提示：

```
<Error>
<Code>AccessDenied</Code>
<Message>You have no right to access this object because of bucket acl.</Message>
<RequestId>5F51FD89F56D43303688B470</RequestId>
<HostId>huijie-ews-officialwebsite.oss-cn-hangzhou.aliyuncs.com</HostId>
</Error>
```

> 说明：
> 用户创建一个Bucket时，如果不指定Bucket权限，OSS会自动为该Bucket设置private权限。
> 对于private资源，需要获得授权才能访问。关于授权管理，可参考权限控制。
> 对于一个已经存在的Bucket，在对象存储 -> 指定的bucket -> 权限管理 里面设置读写权限。

## 图片上传

## 图片压缩
目前阿里云有两种方式实现图片压缩功能：质量变换和图片高级压缩。

#### 质量变换
[质量变换](https://help.aliyun.com/document_detail/44705.html?spm=a2c4g.11186623.4.3.64e41729322Z12)操作是使用原图本身的格式对图片进行压缩，因此仅支持有损压缩的图片格式：JPG和WebP。对于无损压缩的图片格式（如PNG），由于其压缩前后图片质量没有变化，所以无法进行质量变换。即使为PNG格式的图片添加了质量变换的参数，也没有实际效果。

如果在质量变换时不指定Q或者q参数，可能会导致图片占用空间变大。如需获得特定质量的图片，请指定Q参数。

1. 将原图缩略为宽度和高度均为100，且相对质量为原图80%的JPG图。
    https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/2171539851/p2629.jpg?x-oss-process=image/resize,w_100,h_100/quality,q_80

    `q`决定图片的相对质量，对原图按照q%进行质量压缩。例如，如果原图质量为100%，添加`quality,q_90`参数会得到质量为90％的图片。如果原图质量为80%，添加`quality,q_90`参数会得到质量72%的图片。

1. 将原图缩略成宽度和高度均为100，且绝对质量为80%的JPG图。
    https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/2171539851/p2629.jpg?x-oss-process=image/resize,w_100,h_100/quality,Q_80

    `Q`决定图片的绝对质量，将原图质量压缩至Q%，如果原图质量小于指定参数值，则按照原图质量重新进行压缩。

    例如，如果原图质量是95%，添加`quality,Q_90`参数会得到质量90％的图片。如果原图质量是80%，添加`quality,Q_90`只能得到质量80%的图片。

> 说明 该参数只能对保存格式为JPG、WebP的图片使用，对其他格式的图片无效果。如果同时指定了`q`和`Q`，会按照`Q`的值进行处理。

#### 图片高级压缩

## 图片加密